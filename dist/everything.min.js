!function(){"use strict";angular.module("myApp",[]).factory("gameLogic",function(){function a(a,b){return angular.equals(a,b)}function b(a){return angular.copy(a)}function c(a){var b=JSON.stringify(a[5][1]+a[5][2]+a[6][2]+a[5][3]+a[6][3]+a[7][3]+a[5][4]+a[6][4]+a[7][4]+a[8][4]);if(b===JSON.stringify("XXXXXXXXXX"))return"X";var c=JSON.stringify(a[13][17]+a[12][16]+a[13][16]+a[11][15]+a[12][15]+a[13][15]+a[10][14]+a[11][14]+a[12][14]+a[13][14]);return c===JSON.stringify("OOOOOOOOOO")?"O":""}function d(a,b,c){return""===c[a][b]||void 0===c[a][b]?(console.log("The position of row, col: ("+a+", "+b+") has been outside of the board!"),!1):!0}function e(a,b,c,d){return Math.abs(a-c)+Math.abs(b-d)==1?(console.log("move is one step around location"),s={set:{key:"isChain",value:!1}},t={set:{key:"chainValue",value:[[a,b],[c,d]]}},!0):c==a+1&&d==b+1||c==a-1&&d==b-1?(console.log("move is one step around location"),s={set:{key:"isChain",value:!1}},t={set:{key:"chainValue",value:[[a,b],[c,d]]}},!0):(console.log("move takes more steps around location"),!1)}function f(a,b,c){var d=new Array,e=0;return""!=c[a][b+1]&&"a"!=c[a][b+1]&&"a"==c[a][b+2]&&(d[e]=[a,b+2],e+=1),""!=c[a+1][b+1]&&"a"!=c[a+1][b+1]&&"a"==c[a+2][b+2]&&(d[e]=[a+2,b+2],e+=1),""!=c[a+1][b]&&"a"!=c[a+1][b]&&"a"==c[a+2][b]&&(d[e]=[a+2,b],e+=1),""!=c[a][b-1]&&"a"!=c[a][b-1]&&"a"==c[a][b-2]&&(d[e]=[a,b-2],e+=1),""!=c[a-1][b-1]&&"a"!=c[a-1][b-1]&&"a"==c[a-2][b-2]&&(d[e]=[a-2,b-2],e+=1),""!=c[a-1][b]&&"a"!=c[a-1][b]&&"a"==c[a-2][b]&&(d[e]=[a-2,b]),d}function g(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b[0]&&a[c][1]==b[1])return!0;return!1}function h(a,b,c,d,e){var h,i,j,k,l=!0,m=new Array;for(m[0]=[a,b,!0,[[a,b]]];;){l=!1;for(var n=0;n<m.length;n++)if(1==m[n][2]){h=m[n][0],i=m[n][1],k=m[n][3],m[n][2]=!1,l=!0;break}if(0==l)break;if(j=f(h,i,e),0!=j.length)for(var o=0;o<j.length;o++)if(1!=g(m,j[o])){k.push([j[o][0],j[o][1]]);var p=JSON.parse(JSON.stringify(k));if(m[m.length]=[j[o][0],j[o][1],!0,p],j[o][0]==c&&j[o][1]==d)return console.log(k),2===k.length?(s={set:{key:"isChain",value:!1}},t={set:{key:"chainValue",value:k}}):(s={set:{key:"isChain",value:!0}},t={set:{key:"chainValue",value:k}}),!0;k.pop()}}return s={},t={},!1}function i(a,f,g,i,j,k){if(void 0===k&&(k=[["","","","","","","","","","","","","","",""],["","","","","","a","","","","","","","","",""],["","","","","","a","a","","","","","","","",""],["","","","","","a","a","a","","","","","","",""],["","","","","","a","a","a","a","","","","","","","","",""],["","O","O","O","O","a","a","a","a","a","a","a","a","a",""],["","","O","O","O","a","a","a","a","a","a","a","a","a",""],["","","","O","O","a","a","a","a","a","a","a","a","a",""],["","","","","O","a","a","a","a","a","a","a","a","a",""],["","","","","","a","a","a","a","a","a","a","a","a",""],["","","","","","a","a","a","a","a","a","a","a","a","X",""],["","","","","","a","a","a","a","a","a","a","a","a","X","X",""],["","","","","","a","a","a","a","a","a","a","a","a","X","X","X",""],["","","","","","a","a","a","a","a","a","a","a","a","X","X","X","X",""],["","","","","","","","","","","a","a","a","a","","","","","","","",""],["","","","","","","","","","","","a","a","a",""],["","","","","","","","","","","","","a","a",""],["","","","","","","","","","","","","","a",""],["","","","","","","","","","","","","","",""]]),d(g,i,k)===!1)throw new Error("One can not make a move outside of the board!");if("a"!==k[g][i])throw new Error("One can only make a move in an empty position!");var l=b(k);if(l[g][i]=0===j?"O":"X",l[a][f]!==l[g][i])throw new Error("The original chess piece is not the expected one!");l[a][f]="a";var m,n=c(l),o=[0,1],p=!1;if(""!==n?("O"===n&&(o=[1,0]),m={endMatch:{endMatchScores:o}},console.log("player: "+n+" WIN!")):p=!0,e(a,f,g,i)===!0)return console.log("single movement"),p&&(m={setTurn:{turnIndex:1-j}}),[m,{set:{key:"board",value:l}},{set:{key:"delta",value:{oldrow:a,oldcol:f,row:g,col:i}}},s,t];if(h(a,f,g,i,k)===!0)return console.log("multiple movements"),p&&(m=2===t.set.value.length?{setTurn:{turnIndex:1-j}}:{setTurn:{turnIndex:1-j}}),[m,{set:{key:"board",value:l}},{set:{key:"delta",value:{oldrow:a,oldcol:f,row:g,col:i}}},s,t];throw console.log("illegal move!"),new Error("Illegal move!")}function j(){return[["","","","","","","","","","","","","","",""],["","","","","","a","","","","","","","","",""],["","","","","","a","a","","","","","","","",""],["","","","","","a","a","a","","","","","","",""],["","","","","","a","a","a","a","","","","","","","","",""],["","O","O","O","O","a","a","a","a","a","a","a","a","a",""],["","","O","O","O","a","a","a","a","a","a","a","a","a",""],["","","","O","O","a","a","a","a","a","a","a","a","a",""],["","","","","O","a","a","a","a","a","a","a","a","a",""],["","","","","","a","a","a","a","a","a","a","a","a",""],["","","","","","a","a","a","a","a","a","a","a","a","X",""],["","","","","","a","a","a","a","a","a","a","a","a","X","X",""],["","","","","","a","a","a","a","a","a","a","a","a","X","X","X",""],["","","","","","a","a","a","a","a","a","a","a","a","X","X","X","X",""],["","","","","","","","","","","a","a","a","a","","","","","","","",""],["","","","","","","","","","","","a","a","a",""],["","","","","","","","","","","","","a","a",""],["","","","","","","","","","","","","","a",""],["","","","","","","","","","","","","","",""]]}function k(a,b,c){for(var d=[],e=b,f=a,g=0;g<c.length;g++){var h=c[g],j=i(h.oldrow,h.oldcol,h.row,h.col,f,e.board),k={board:j[1].set.value,delta:j[2].set.value};d.push({stateBeforeMove:e,stateAfterMove:k,turnIndexBeforeMove:f,move:j,comment:{en:h.comment}}),e=k,f=j[0].setTurn.turnIndex}return d}function l(){return k(0,{},[{oldrow:6,oldcol:4,row:6,col:5,comment:"First player usually might move a topmost piece one step towards its opposite corner"},{oldrow:11,oldcol:14,row:11,col:13,comment:"Second player gets a similar move from his own corner"},{oldrow:6,oldcol:2,row:6,col:6,comment:"Two consecutive hops takes place during the first player's turn. A hop consist of jumping over a single adjacent piece, only the diagonal direction is allowed"},{oldrow:12,oldcol:15,row:12,col:13,comment:"Second player also provides a single hop from the middle of his second line, and jumps one more step based on one of the piece in his topmost line"},{oldrow:7,oldcol:4,row:7,col:5,comment:"One step in its adjacent empty position towards the opposite cornerï¼Œ A player may not combine hopping with a single move"},{oldrow:13,oldcol:14,row:11,col:12,comment:"A single hop based on his own pieces"},{oldrow:5,oldcol:2,row:7,col:6,comment:"Two consecutive hops based on his own pieces"},{oldrow:11,oldcol:12,row:11,col:11,comment:"One step in its adjacent empty position in order to provide other pieces a better chance to move more steps"},{oldrow:7,oldcol:6,row:8,col:7,comment:"First player gives a single move on the piece's adjacent empty space"},{oldrow:13,oldcol:16,row:11,col:10,comment:"Second player has a three-step-hops move towards the opposite corner, The more distance your piece takes place, the better chance you win"},{oldrow:5,oldcol:1,row:5,col:2,comment:"First player moves the innermost piece one step to prepare for another long jump"},{oldrow:11,oldcol:10,row:10,col:9,comment:"Second player takes one move to form a longer bridge to prepare for a long jump as well"},{oldrow:5,oldcol:2,row:9,col:8,comment:"First player provides a three-step-hops, now arround the new location, there are two kind of pieces"},{oldrow:12,oldcol:14,row:10,col:8,comment:"Second player takes a three-step-hops again"},{oldrow:9,oldcol:8,row:13,col:16,comment:"First player makes use of his opponent's pieces, provides a four-step-hops and finally located in his opponent's corner, He'll win the game if all his pieces firstly place in the opposite corner"},{oldrow:11,oldcol:15,row:11,col:14,comment:"Second player makes one step move"},{oldrow:5,oldcol:4,row:13,col:14,comment:"First player makes a five-step-hops based on both his and his opponent's pieces"},{oldrow:11,oldcol:14,row:5,col:2,comment:"Second player makes a even better six-step-hops based on both sides' pieces"},{oldrow:6,oldcol:6,row:7,col:6,comment:"First player takes a one step move, wants to block the 'bridge' as well as to prepare for the next long jump"},{oldrow:13,oldcol:17,row:11,col:15,comment:"Second player gives a hop from the innermost corner"},{oldrow:7,oldcol:6,row:11,col:14,comment:"First player takes a four-step-hops and settles another his piece in his opposite corner"},{oldrow:10,oldcol:14,row:10,col:10,comment:"Second player takes a three-step-hops"},{oldrow:6,oldcol:5,row:7,col:6,comment:"First player provides a single move"},{oldrow:10,oldcol:8,row:9,col:8,comment:"Second player also takes a single move to block his opponent's further jump"},{oldrow:13,oldcol:16,row:13,col:17,comment:"First player occupied the innermost corner with one single move, in most case this piece will never move again"},{oldrow:10,oldcol:10,row:6,col:4,comment:"Second player makes some progress, with a four-step-hops, another piece reaches the opposite corner"},{oldrow:13,oldcol:14,row:13,col:16,comment:"First player gets a hop in his opposite corner"},{oldrow:11,oldcol:13,row:11,col:12,comment:"Second player gives a single move before jumping "},{oldrow:8,oldcol:4,row:7,col:4,comment:"First player gives a single move before jumping"},{oldrow:9,oldcol:8,row:9,col:7,comment:"Second player moves away the blocker on 'bridge'"},{oldrow:7,oldcol:6,row:11,col:10,comment:"First player forward a piece on the bridge, but still be blocked by another piece, one can not jump through two or more adjacent pieces"},{oldrow:11,oldcol:12,row:12,col:12,comment:"Second player moves his bridge blocker one step away, try to use another diagonal way to jump, but this is a mistake, his opponent now can make use of the whole 'bridge'"},{oldrow:11,oldcol:10,row:13,col:14,comment:"First player gives a two-step-hops, another piece has been settled in the corner"},{oldrow:12,oldcol:12,row:8,col:6,comment:"Second player forward his piece by three-step-hops, but still blocked by his own piece"},{oldrow:7,oldcol:4,row:11,col:12,comment:"First player gives a four-step-hops"},{oldrow:5,oldcol:2,row:5,col:1,comment:"Second player moves a piece to the innermost corner"},{oldrow:11,oldcol:12,row:11,col:13,comment:"First player takes a single move to form a better 'bridge'"},{oldrow:13,oldcol:15,row:12,col:14,comment:"Second player provides a single move"},{oldrow:11,oldcol:14,row:12,col:15,comment:"First player also maneuvers his piece in the opposite corner to make room for newly imcoming pieces"},{oldrow:12,oldcol:14,row:10,col:8,comment:"Second player gives a three-step-hops on the bridge, but still be blocked"},{oldrow:7,oldcol:3,row:7,col:4,comment:"First player makes a single move on his side of 'bridge'"},{oldrow:6,oldcol:4,row:6,col:2,comment:"Second player gives a hop to clear the end of 'bridge'"},{oldrow:7,oldcol:4,row:11,col:14,comment:"First player provides a long consecutive jumps from the beginning of the 'bridge' to the end"},{oldrow:8,oldcol:6,row:6,col:4,comment:"Second player makes a one-step-hop to clean the end of his 'bridge'"},{oldrow:11,oldcol:14,row:12,col:14,comment:"First player makes a hop to clean his end of 'bridge' as well"},{oldrow:12,oldcol:16,row:10,col:14,comment:"Second player makes a hop"},{oldrow:6,oldcol:3,row:7,col:4,comment:"First player gives a single move before a long jump"},{oldrow:6,oldcol:4,row:6,col:3,comment:"Second player provides a hop to make room for a new long jump"},{oldrow:7,oldcol:4,row:11,col:14,comment:"First player makes a long jump, it's cool"},{oldrow:6,oldcol:3,row:5,col:2,comment:"Second player makes a single move"},{oldrow:12,oldcol:14,row:13,col:15,comment:"First player also makes a single move"},{oldrow:10,oldcol:8,row:6,col:4,comment:"Second player gets a two-step-hops and reaches the opposite corner"},{oldrow:8,oldcol:7,row:9,col:8,comment:"First player takes a single move, he may decide to fold his 'bridge' at the end of game"},{oldrow:6,oldcol:4,row:6,col:3,comment:"Second player makes a single move the clean up a room"},{oldrow:5,oldcol:3,row:6,col:4,comment:"First player makes a single move, the final piece in his corner is now waiting on the entry of the 'bridge'"},{oldrow:11,oldcol:15,row:9,col:13,comment:"Second player jumps with a hop in his own corner"},{oldrow:6,oldcol:4,row:12,col:16,comment:"First player makes a cool six-step-hops into his opposite corner"},{oldrow:9,oldcol:13,row:10,col:13,comment:"Second player wants to reach his 'bridge', so he makes a single move towards it"},{oldrow:11,oldcol:14,row:11,col:15,comment:"First player makes a single move"},{oldrow:10,oldcol:14,row:10,col:12,comment:"Second player just makes a hop in his own corner"},{oldrow:9,oldcol:8,row:11,col:14,comment:"First player takes a three-step-hops, now only two pieces are not in his opposite corner"},{oldrow:10,oldcol:13,row:10,col:11,comment:"Second player makes a hop towards still his 'bridge'"},{oldrow:7,oldcol:5,row:8,col:6,comment:"First player gives a single move before a long jump"},{oldrow:10,oldcol:12,row:11,col:12,comment:"Second player provides a single move"},{oldrow:8,oldcol:6,row:12,col:14,comment:"First player makes a four-step-hops into its corner"},{oldrow:11,oldcol:12,row:9,col:6,comment:"Second player gets a three-step-hops"},{oldrow:11,oldcol:14,row:10,col:14,comment:"First player makes a single move before final win"},{oldrow:9,oldcol:6,row:8,col:5,comment:"Second player makes a single move to form a new 'bridge'"},{oldrow:11,oldcol:13,row:11,col:14,comment:"First player makes a final single move, now all his pieces are firstly in his opponent's corner, this gets him win the game"}])}function m(b){try{var c=b.move,d=b.turnIndexBeforeMove,e=b.stateBeforeMove,f=c[2].set.value,g=f.oldrow,h=f.oldcol,j=f.row,k=f.col,l=e.board,m=(c[1].set.value,i(g,h,j,k,d,l));if(!a(c[1],m[1])||!a(c[2],m[2]))return!1}catch(n){return!1}return!0}function n(a,b,c){var d;for(d=0;d<c.length;d++)if(c[d][0]===a&&c[d][1]===b)return!0;return!1}function o(){var a=w[w.length-1],b=Math.floor(Math.random()*a.length);return x=a[b][0],y=a[b][1],a.splice(b,1),0===a.length&&w.pop(),0===w.length?!1:!0}function p(a){var b=a[a.length-1],c=Math.floor(Math.random()*b.length),d=b[c][0],e=b[c][1];return b.splice(c,1),0===b.length&&a.pop(),0===a.length?{flag:!1,value:[d,e]}:{flag:!0,value:[d,e]}}function q(a,b,c,d,e,f,g){if(0===d.length)return{distance:0};for(var h,j,k=b,l=c,m=g-1,o=angular.copy(d),r=angular.copy(e),s=angular.copy(f);;){if(0===k&&0===l){var t=p(o);k=t.value[0],l=t.value[1]}if("X"!==f[k][l])break;r.push([k,l]),k=0,l=0}if(0===m){var u=[];for(h=1;19>h;h++)for(j=1;j<s[h].length;j++)if("X"===s[h][j]){if(n(h,j,r))continue;var w,x,y,z,A=0;for(w=1;19>w;w++)for(x=1;x<s[h].length;x++)try{z=i(h,j,w,x,1,s),y=.2*Math.abs(x-j)-.5*Math.abs(x-l)+1*Math.abs(j-l)-.7*Math.abs(w-k),0===A&&(A=y,u.push({distance:A,value:[[h,j],[w,x]],move:z})),y>A&&(A=y,u.pop(),u.push({distance:A,value:[[h,j],[w,x]],move:z}))}catch(B){}}var C=u[0];for(h=0;h<u.length;h++)C.distance<u[h].distance&&(C=u[h]);return C}for(h=1;19>h;h++)for(j=1;j<s[h].length;j++)if("X"===s[h][j]){if(n(h,j,r))continue;var w,x,y,z,A=0;for(w=1;19>w;w++)for(x=1;x<s[h].length;x++){try{z=i(h,j,w,x,1,s),y=.2*Math.abs(x-j)-.5*Math.abs(x-l)+1*Math.abs(j-l)-.7*Math.abs(w-k)}catch(B){y=-100}if(-100!==y){var D=angular.copy(s);if(D[h][j]="a",D[w][x]="X",w===k&&x===l){var E=angular.copy(r);E.push([k,l]);var F=0,G=0}else var E=angular.copy(r),F=k,G=l;var H=angular.copy(a);void 0===H.distance?H={distance:y,value:[[h,j],[w,x]],move:z}:H.distance+=y;var I=q(H,F,G,o,E,D,m);1===m&&(H.distance+=I.distance,v.push(H))}}}}function r(a){for(v=[];;){if(0===x&&0===y&&o(),"X"!==a[x][y])break;u.push([x,y]),x=0,y=0}var b={},c=q(b,x,y,w,u,a,z);if(1!=z){var d,c=v[0];for(d=0;d<v.length;d++)c.distance<v[d].distance&&(c=v[d])}return c.value[1][0]===x&&c.value[1][1]===y&&(u.push([x,y]),x=0,y=0),c.move}var s,t,u=[],v=[],w=[[[5,4],[6,4],[7,4],[8,4]],[[5,3],[6,3],[7,3]],[[5,2],[6,2]],[[5,1]]],x=0,y=0,z=1;return{getInitialBoard:j,createMove:i,isMoveOk:m,getExampleGame:l,createComputerMove:r}})}(),function(){angular.module("myApp").controller("Ctrl",["$scope","$rootScope","$log","$timeout","gameService","stateService","gameLogic","aiService","resizeGameAreaService","$translate",function(a,b,c,d,e,f,g,h,i){"use strict";function j(){a.ani_point=[],a.ul=!1,a.ur=!1,a.l=!1,a.r=!1,a.dl=!1,a.dr=!1,a.jul=!1,a.jur=!1,a.jl=!1,a.jr=!1,a.jdl=!1,a.jdr=!1}function k(b){a.params=b,a.board=b.stateAfterMove.board,void 0===a.board&&(a.board=g.getInitialBoard()),a.isYourTurn=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.turnIndex=b.turnIndexAfterMove,-2===b.yourPlayerIndex||-1===b.yourPlayerIndex||!a.isYourTurn&&""!==b.playersInfo[b.yourPlayerIndex].playerId,a.rotate="playBlack"===b.playMode?!0:!1,x?u(!0):a.isYourTurn&&""===b.playersInfo[b.yourPlayerIndex].playerId&&d(function(){v=g.createComputerMove(a.board,a.turnIndex),u(!0)},300)}function l(b,d,e){var f,g,h=d-z.offsetLeft,i=e-z.offsetTop;if(0>h||0>i||h>=z.clientWidth||i>=z.clientHeight){if(!E)return;var j=p();o({top:i-j.height/2,left:h-j.width/2})}else{var f=Math.floor(A*i/z.clientHeight),g=f%2===0?Math.floor(B*h/z.clientWidth):m(B*h/z.clientWidth),k=A-f,l=B-g,s=n(k,l);"touchstart"!==b||C||s&&a.board[s.row][s.col]&&(C={row:A+1-s.row,col:B+1-s.col},D=s,c.info("dragging started from: ( "+JSON.stringify(s)+" )"),E=document.getElementById("myPiece_"+D.row+"x"+D.col),G=E.parentNode,"a"!==a.board[D.row][D.col]&&(E.style.width="150%",E.style.height="150%",E.style["border-width"]="4px",E.style["border-style"]="groove",E.style["border-color"]="yellow"))}if(E){if("touchend"===b){var t=D,u=s;r(t,u)}else{F=document.getElementById("myPiece_"+s.row+"x"+s.col),H=F.parentNode;var v=(parseFloat(H.style.top)-parseFloat(G.style.top))/.035-100+"%",w=(parseFloat(H.style.left)-parseFloat(G.style.left))/.035-100+"%";E.style.left=w,E.style.top=v}("touchend"===b||"touchcancel"===b||"touchleave"===b)&&(o(q(C.row,C.col)),E.style["border-width"]="",E.style["border-style"]="",E.style["border-color"]="",E.style.width="100%",E.style.height="100%",C=null,D=null,E=null)}}function m(a){return Math.round(a)-.5}function n(b,c){for(var d=[18-c,18-b],e=0;e<a.map.length;e++)for(var f=a.map[e],g=0;g<f.length;g++)if(angular.equals(f[g],d))return{row:e,col:g};return null}function o(a){var b=q(C.row,C.col);E.style.left=a.left-b.left+"%",E.style.top=a.top-b.top+"%"}function p(){return{width:2*z.clientWidth/B,height:2*z.clientHeight/A}}function q(a,b){var c=p();return{top:a*c.height,left:b*c.width}}function r(b,d){var e="Dragged piece "+b.row+"x"+b.col+" to square "+d.row+"x"+d.col;if(c.info(e),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");a.isYourTurn&&(a.rotate&&(b.row=A+1-b.row,b.col=B+1-b.col,d.row=A+1-d.row,d.col=B+1-d.col),s(b,d))}function s(b,d){try{a.oldrow=b.row,a.oldcol=b.col,v=g.createMove(b.row,b.col,d.row,d.col,a.turnIndex,a.board),a.isYourTurn=!1,u(!0)}catch(e){return void c.info(["It is illegal to move position from:",a.oldrow,a.oldcol," to position:",d.row,d.col])}}function t(b){j();var c=b[2].set.value.row,d=b[2].set.value.col,e=b[2].set.value.oldrow,f=b[2].set.value.oldcol;a.ani_point[0]=e,a.ani_point[1]=f,c===e&&d===f+1?a.ul=!0:c===e+1&&d===f+1?a.ur=!0:c===e-1&&d===f?a.l=!0:c===e+1&&d===f?a.r=!0:c===e-1&&d===f-1?a.dl=!0:c===e&&d===f-1?a.dr=!0:c===e&&d===f+2?a.jul=!0:c===e+2&&d===f+2?a.jur=!0:c===e-2&&d===f?a.jl=!0:c===e+2&&d===f?a.jr=!0:c===e-2&&d===f-2?a.jdl=!0:c===e&&d===f-2&&(a.jdr=!0)}function u(){if(w=angular.copy(v),x=angular.copy(v[3].set.value),x&&0===y.length&&(y=angular.copy(v[4].set.value)),x&&y.length>2&&void 0===w[0].setTurn&&(w[0]={setTurn:{turnIndex:a.turnIndex}}),x&&y.length>2&&void 0!==w[0].setTurn&&(w[0].setTurn.turnIndex=a.turnIndex),x){var b=w[2].set.value.row,c=w[2].set.value.col;w[1].set.value[b][c]="a",w[1].set.value[y[1][0]][y[1][1]]=0===a.turnIndex?"O":"X",w[1].set.value[y[0][0]][y[0][1]]="a",w[2].set.value.oldrow=y[0][0],w[2].set.value.oldcol=y[0][1],w[2].set.value.row=y[1][0],w[2].set.value.col=y[1][1]}y.length>2?(y.reverse(),y.pop(),y.reverse()):(v[3].set.value=!1,w[0]=v[0],x=!1,y=[]),t(w),d(function(){console.log("timeout! "),e.makeMove(w)},500)}i.setWidthToHeight(1),a.selectedPosition=[];var v,w,x=!1,y=[],z=document.getElementById("gameArea"),A=17,B=17,C=null,D=null,E=null,F=null,G=null,H=null;a.map=[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[3,13],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[4,13],[3.5,12],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[5,13],[4.5,12],[4,11],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[6,13],[5.5,12],[5,11],[4.5,10],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[9,17],[8.5,16],[8,15],[7.5,14],[7,13],[6.5,12],[6,11],[5.5,10],[5,9],[4.5,8],[4,7],[3.5,6],[3,5],[0,0]],[[0,0],[0,0],[9.5,16],[9,15],[8.5,14],[8,13],[7.5,12],[7,11],[6.5,10],[6,9],[5.5,8],[5,7],[4.5,6],[4,5],[0,0]],[[0,0],[0,0],[0,0],[10,15],[9.5,14],[9,13],[8.5,12],[8,11],[7.5,10],[7,9],[6.5,8],[6,7],[5.5,6],[5,5],[0,0]],[[0,0],[0,0],[0,0],[0,0],[10.5,14],[10,13],[9.5,12],[9,11],[8.5,10],[8,9],[7.5,8],[7,7],[6.5,6],[6,5],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[11,13],[10.5,12],[10,11],[9.5,10],[9,9],[8.5,8],[8,7],[7.5,6],[7,5],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[12,13],[11.5,12],[11,11],[10.5,10],[10,9],[9.5,8],[9,7],[8.5,6],[8,5],[7.5,4],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[13,13],[12.5,12],[12,11],[11.5,10],[11,9],[10.5,8],[10,7],[9.5,6],[9,5],[8.5,4],[8,3],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[14,13],[13.5,12],[13,11],[12.5,10],[12,9],[11.5,8],[11,7],[10.5,6],[10,5],[9.5,4],[9,3],[8.5,2],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[15,13],[14.5,12],[14,11],[13.5,10],[13,9],[12.5,8],[12,7],[11.5,6],[11,5],[10.5,4],[10,3],[9.5,2],[9,1],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[13.5,8],[13,7],[12.5,6],[12,5],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[14,7],[13.5,6],[13,5],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[14.5,6],[14,5],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[15,5],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]],a.newposition=50,a.newpositionTop=50,a.setPagePosition=function(b,c){return a.newposition=6.3*a.map[c][b][0]-9+"%",a.newposition},a.setPagePositionTop=function(b,c){return a.newpositionTop=5.7*a.map[b][c][1]-3.8+"%",a.newpositionTop},window.handleDragEvent=l,a.getCellTypeO=function(b,c){return a.rotate&&(b=A+1-b,c=B+1-c),"O"===a.board[b][c]},a.getCellTypeX=function(b,c){return a.rotate&&(b=A+1-b,c=B+1-c),"X"===a.board[b][c]},e.setGame({gameDeveloperEmail:"xzzhuchen@gmail.com",minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:g.isMoveOk,updateUI:k})}])}(),angular.module("myApp").factory("aiService",["alphaBetaService","gameLogic",function(a,b){"use strict";function c(b,c,g){return a.alphaBetaDecision([null,{set:{key:"board",value:b.board}},{set:{key:"isUnderCheck",value:b.isUnderCheck}},{set:{key:"canCastleKing",value:b.canCastleKing}},{set:{key:"canCastleQueen",value:b.canCastleQueen}},{set:{key:"enpassantPosition",value:b.enpassantPosition}}],c,e,d,"?debug"===window.location.search?f:null,g)}function d(a){if(a[0].endMatch){var b=a[0].endMatch.endMatchScores;return b[0]>b[1]?Number.POSITIVE_INFINITY:b[0]<b[1]?Number.NEGATIVE_INFINITY:0}return 0}function e(a,c){for(var d=a[1].set.value,e=a[2].set.value,f=a[3].set.value,g=a[4].set.value,h=a[5].set.value,i=b.getPossibleMoves(d,c,e,f,g,h),j=[],k=0;k<i.length;k++)for(var l=i[k],m=l[0],n=l[1],o=0;o<n.length;o++){var p=n[o];try{console.log("going to create move: "+JSON.stringify(m)+" --> "+JSON.stringify(p)),j.push(b.createMove(d,m,p,c,e,f,g,h))}catch(q){}}return j}function f(a){return"\n"+a[1].set.value.join("\n")+"\n"}return{createComputerMove:c}}]);
//# sourceMappingURL=everything.min.js.map